# Ancient Factory - Gemini Agent Context

## Project Overview
Roguelike factory automation game where players build production chains across hexagonal tiles to fulfill demands from a central core while managing factory efficiency.
- **Platform:** Unity 2022/6000+ (C# 9.0+)
- **Render Pipeline:** Universal Render Pipeline (URP)
- **Core Loop:** Fulfill T6 demands -> Grow Core -> Manage Production -> Meta-progression.

## Code Standards & Style
- **Language:** C# 9.0+
- **Formatting:** K&R style braces, 4 spaces indentation.
- **Comments:** Minimal, explain *why* not *what*. Avoid "divider" comments.
- **Namespaces:** Match folder structure (e.g., `AncientFactory.Core.Systems`). Pluralize namespaces to avoid collisions.
- **Using Directives:** Place `using` statements **outside** (above) the `namespace` declaration.
- **File Structure:** One class per file, filename matches class name.

## Naming Conventions
- **PascalCase:** Classes, Structs, Enums, Public Properties/Methods/Fields, Constants (or UPPER_SNAKE_CASE).
- **camelCase:** Private Serialized Fields (`[SerializeField]`), Local Variables, Parameters.
- **_camelCase:** Private Non-Serialized Fields.

## Unity Specifics
- **Serialization:** Use `[SerializeField] private` for Inspector variables.
- **Attributes:** Place attributes (e.g., `[SerializeField]`) above the field, not inline.
- **Lifecycle:** `Awake` -> `OnEnable` -> `Start` -> `Update` -> `OnDisable` -> `OnDestroy`.
- **Editor Logic:** Wrap editor-only logic in `#if UNITY_EDITOR`.

## Architecture
- **Systems:** Persistent, Global (`DontDestroyOnLoad`), Singleton. Handle data & state.
- **Managers:** Scene-specific. Handle objects & flow within a scene.
- **Data:** Prefer `ScriptableObject` for configuration and databases.

## UI Development (UI Toolkit)
- **Framework:** UI Toolkit (UIDocument, UXML, USS). Do not use legacy IMGUI or UGUI (Canvas).
- **Styling:** External `.uss` files only (no inline styles). Use classes for reusability.
- **Structure:** Separate UXML (structure) from USS (style) and C# (logic).

## Key Libraries
- **Odin Inspector:** Use attributes (`[Title]`, `[Button]`, `[OnCollectionChanged]`) for better Inspector UX.
- **Aline:** Use `Drawing` namespace for runtime/debug visualization (`Draw.ingame`, `Draw.xy`).
- **Unity Packages:** Input System (`com.unity.inputsystem`), Cinemachine, AI Navigation.

## Game Mechanics Context
- **Map:** Central Core surrounded by hexagonal rings of tiles.
- **Tiles:** 
  - **Resource:** Provide raw materials.
  - **Production:** Player builds factories here.
  - **Power:** Powers adjacent tiles.
  - **Transport/Nature/Scrubber:** Specialized utility tiles.
- **Flow:** Materials and power flow only between adjacent tiles.
- **Carbon:** Generated by production and power. Accumulates globally.
- **Weather:** High carbon triggers events that block tiles.
- **Meta-Progression:** All produced materials are banked to unlock persistent upgrades between runs.
